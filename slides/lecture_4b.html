<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>ETC1010: Introduction to Data Analysis</title>
    <meta charset="utf-8" />
    <meta name="author" content="Nicholas Tierney" />
    <script src="libs/header-attrs-2.1/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/ninjutsu.css" rel="stylesheet" />
    <link href="libs/font-awesome-animation-1.0/font-awesome-animation-emi.css" rel="stylesheet" />
    <script src="libs/fontawesome-5.0.13/js/fontawesome-all.min.js"></script>
    <script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
    <script src="libs/plotly-binding-4.9.2/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <script src="libs/jquery-1.11.3/jquery.min.js"></script>
    <link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
    <!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> 
    -->
    <link rel="icon" href="images/favicon.ico"  type='image/x-icon'/>    
    <link rel="stylesheet" href="assets/animate.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-logo.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-brand.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-fonts.css" type="text/css" />
    <link rel="stylesheet" href="assets/styles.css" type="text/css" />
    <link rel="stylesheet" href="assets/custom.css" type="text/css" />
    <link rel="stylesheet" href="assets/demo.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

  


&lt;!-- background-color: #006DAE --&gt;
&lt;!-- class: middle center hide-slide-number --&gt;

&lt;div class="shade_black"  style="width:60%;right:0;bottom:0;padding:10px;border: dashed 4px white;margin: auto;"&gt;
&lt;i class="fas fa-exclamation-circle"&gt;&lt;/i&gt; These slides are viewed best by Chrome and occasionally need to be refreshed if elements did not load properly. See &lt;a href=/&gt;here for PDF &lt;i class="fas fa-file-pdf"&gt;&lt;/i&gt;&lt;/a&gt;.
&lt;/div&gt;

&lt;br&gt;

.white[Press the **right arrow** to progress to the next slide!]

---

background-image: url(images/bg1.jpg)
background-size: cover
class: hide-slide-number split-70 title-slide
count: false

.column.shade_black[.content[

&lt;br&gt;

# .monash-blue.outline-text[ETC1010: Introduction to Data Analysis]

&lt;h2 class="monash-blue2 outline-text" style="font-size: 30pt!important;"&gt;Week 4, part B&lt;/h2&gt;

&lt;br&gt;

&lt;h2 style="font-weight:900!important;"&gt;Advanced topics in data visualisation&lt;/h2&gt;

.bottom_abs.width100[

Lecturer: *Nicholas Tierney*

Department of Econometrics and Business Statistics

<span>&lt;i class="fas  fa-envelope faa-float animated "&gt;&lt;/i&gt;</span>  ETC1010.Clayton-x@monash.edu

April 2020

&lt;br&gt;
]


]]



&lt;div class="column transition monash-m-new delay-1s" style="clip-path:url(#swipe__clip-path);"&gt;
&lt;div class="background-image" style="background-image:url('images/large.png');background-position: center;background-size:cover;margin-left:3px;"&gt;
&lt;svg class="clip-svg absolute"&gt;
&lt;defs&gt;
&lt;clipPath id="swipe__clip-path" clipPathUnits="objectBoundingBox"&gt;
&lt;polygon points="0.5745 0, 0.5 0.33, 0.42 0, 0 0, 0 1, 0.27 1, 0.27 0.59, 0.37 1, 0.634 1, 0.736 0.59, 0.736 1, 1 1, 1 0, 0.5745 0" /&gt;
&lt;/clipPath&gt;
&lt;/defs&gt;	
&lt;/svg&gt;
&lt;/div&gt;
&lt;/div&gt;






---
class: transition
# While the song is playing...

Draw a mental model / concept map of last lectures content on joins.

---
class: refresher
# recap

- Joins
- venn diagrams
- feedback

---

# Joins with a person and a coat, by [Leight Tami](https://twitter.com/leigh_tami18/status/1021471889309487105/photo/1)

&lt;img src="images/joins_using_coat.jpg" width="100%" style="display: block; margin: auto;" /&gt;

---
# Upcoming Due Dates

- Assignment 1: ...
- Other due dates?
- Stay tuned on ED for the upcoming dates

---


# Making effective data plots

1. Principles / science of data visualisation
2. Features of graphics

---
# Principles / science of data visualisation

  - Palettes and colour blindness
  - change blindness
  - using proximity
  - hierarchy of mappings

---
# Features of graphics 

- Layering statistical summaries
- Themes
- adding interactivity

---
# Palettes and colour blindness

There are three main types of colour palette:

- Qualitative: categorical variables
- Sequential: low to high numeric values
- Diverging: negative to positive values

---
# Qualitative: categorical variables

&lt;img src="lecture_4b_files/figure-html/print-qual-pal-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Sequential: low to high numeric values

&lt;img src="lecture_4b_files/figure-html/print-seq-pal-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Diverging: negative to positive values

&lt;img src="lecture_4b_files/figure-html/print-div-pal-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Example: TB data


```
## # A tibble: 157,820 x 5
##    country      year count gender age  
##    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;
##  1 Afghanistan  1980    NA m      04   
##  2 Afghanistan  1981    NA m      04   
##  3 Afghanistan  1982    NA m      04   
##  4 Afghanistan  1983    NA m      04   
##  5 Afghanistan  1984    NA m      04   
##  6 Afghanistan  1985    NA m      04   
##  7 Afghanistan  1986    NA m      04   
##  8 Afghanistan  1987    NA m      04   
##  9 Afghanistan  1988    NA m      04   
## 10 Afghanistan  1989    NA m      04   
## # … with 157,810 more rows
```

---
# Example: TB data: adding relative change


```
## # A tibble: 219 x 4
##    country             `2002` `2012`  reldif
##    &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1 Afghanistan           6509  13907  1.14  
##  2 Albania                225    185 -0.178 
##  3 Algeria               8246   7510 -0.0893
##  4 American Samoa           1      0 -1     
##  5 Andorra                  2      2  0     
##  6 Angola               17988  22106  0.229 
##  7 Anguilla                 0      0  0     
##  8 Antigua and Barbuda      4      1 -0.75  
##  9 Argentina             5383   4787 -0.111 
## 10 Armenia                511    316 -0.382 
## # … with 209 more rows
```




---
# Example: Sequential colour with default palette


```r
ggplot(tb_map) + geom_polygon(aes(x = long, y = lat, group = group, fill = reldif)) +
  theme_map()
```

&lt;img src="lecture_4b_files/figure-html/map-default-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---
# Example: (improved) sequential colour with default palette


```r
library(viridis)
ggplot(tb_map) +
  geom_polygon(aes(x = long, y = lat, group = group, fill = reldif)) +
  theme_map() + scale_fill_viridis(na.value = "white")
```

&lt;img src="lecture_4b_files/figure-html/viridis-plot-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---
# Example:  Diverging colour with better palette


```r
ggplot(tb_map) +
  geom_polygon(aes(x = long, y = lat, group = group, fill = reldif)) +
  theme_map() +
  scale_fill_distiller(palette = "PRGn", na.value = "white", limits = c(-7, 7))
```

&lt;img src="lecture_4b_files/figure-html/map-distiller-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---
# Summary on colour palettes

- Different ways to map colour to values:
  - Qualitative: categorical variables
  - Sequential: low to high numeric values
  - Diverging: negative to positive values

---
# Colour blindness

- About 8% of men (about 1 in 12), and 0.5% women (about 1 in 200) population have difficulty distinguishing between red and green. 
- Several colour blind tested palettes: RColorbrewer has an associated web site [colorbrewer.org](http://colorbrewer2.org) where the palettes are labelled. See also `viridis`, and `scico`.

---
# Plot of two coloured points: Normal Mode

&lt;img src="lecture_4b_files/figure-html/colour-blind-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Plot of two coloured points: dicromat mode

&lt;img src="lecture_4b_files/figure-html/colour-blind-2-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Showing all types of colourblindness

&lt;img src="lecture_4b_files/figure-html/colourblindr-show-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Impact of colourblind-safe palette

```r
p2 &lt;- p + scale_colour_brewer(palette = "Dark2")
p2
```

&lt;img src="lecture_4b_files/figure-html/colourblindr-brewer-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Impact of colourblind-safe palette
&lt;img src="lecture_4b_files/figure-html/cb-grid-1.png" width="100%" style="display: block; margin: auto;" /&gt;


---
# Impact of colourblind-safe palette

```r
p3 &lt;- p + scale_colour_viridis_d()
p3
```

&lt;img src="lecture_4b_files/figure-html/colourblindr-viridis-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Impact of colourblind-safe palette
&lt;img src="lecture_4b_files/figure-html/cb-grid-viridis-1.png" width="100%" style="display: block; margin: auto;" /&gt;


---
# Summary colour blindness

- Apply colourblind-friendly colourscales
  - `+ scale_colour_viridis()`
  - `+ scale_colour_brewer(palette = "Dark2")`
  - `scico` R package

---
# Pre-attentiveness: Find the odd one out?

&lt;img src="lecture_4b_files/figure-html/pre-attentiveness-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Pre-attentiveness: Find the odd one out?

&lt;img src="lecture_4b_files/figure-html/pre-attentive-easier-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
class: idea
# Using proximity in your plots

Basic rule: place the groups that you want to compare close to each other



---
# Which plot answers which question?

- "Is the incidence similar for males and females in 2012 across age groups?"
- "Is the incidence similar for age groups in 2012, across gender?" 

---
# incidence similar for: (M and F) or (age, across gender) ?" 



&lt;img src="lecture_4b_files/figure-html/print-many-tb-1.png" width="100%" style="display: block; margin: auto;" /&gt;&lt;img src="lecture_4b_files/figure-html/print-many-tb-2.png" width="100%" style="display: block; margin: auto;" /&gt;

???

Here are two different arrangements of the tb data. To answer the question "Is the incidence similar for males and females in 2012 across age groups?" the first arrangement is better. It puts males and females right beside each other, so the relative heights of the bars can be seen quickly. The answer to the question would be "No, the numbers were similar in youth, but males are more affected with increasing age."

The second arrangement puts the focus on age groups, and is better to answer the question "Is the incidence similar for age groups in 2012, across gender?" To which the answer would be "No, among females, the incidence is higher at early ages. For males, the incidence is much more uniform across age groups."


---
# "Incidence similar for M &amp; F in 2012 across age?"

&lt;img src="lecture_4b_files/figure-html/gg-fill-gender-print-1.png" width="100%" style="display: block; margin: auto;" /&gt;

- Males &amp; females next to each other: relative heights of bars is seen quickly. 
- Auestion answer: "No, the numbers were similar in youth, but males are more affected with increasing age."

---
# "Incidence similar for age in 2012, across gender?"

&lt;img src="lecture_4b_files/figure-html/gg-fill-age-print-1.png" width="100%" style="display: block; margin: auto;" /&gt;

- Puts the focus on age groups 
- Answer to the question: "No, among females, the incidence is higher at early ages. For males, the incidence is much more uniform across age groups."

---
# Proximity wrap up

- Facetting of plots, and proximity are related to change blindness, an area of study in cognitive psychology. 
- There are a series of fabulous videos illustrating the effects of making a visual break, on how the mind processes it by Daniel Simons lab. 
- Here's one example:  
[The door study](https://www.youtube.com/watch?v=FWSxSQsspiQ)

---
# Layering

- *Statistical summaries:* It is common to layer plots, particularly by adding statistical summaries, like a model fit, or means and standard deviations. The purpose is to show the **trend** in relation to the **variation**. 
- *Maps:* Commonly maps provide the framework for data collected spatially. One layer for the map, and another for the data.



---
# `geom_point()`

```r
ggplot(df, aes(x = x, y = y1)) + geom_point()
```

&lt;img src="lecture_4b_files/figure-html/point-1-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_smooth(method = "lm", se = FALSE)`

```r
ggplot(df, aes(x = x, y = y1)) + geom_point() +
  geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="lecture_4b_files/figure-html/point-2-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_smooth(method = "lm")`

```r
ggplot(df, aes(x = x, y = y1)) + geom_point() +
  geom_smooth(method = "lm")
```

&lt;img src="lecture_4b_files/figure-html/point-3-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_point()`


```r
ggplot(df, aes(x = x, y = y2)) + geom_point()
```

&lt;img src="lecture_4b_files/figure-html/point-4-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_smooth(method = "lm", se = FALSE)`

```r
ggplot(df, aes(x = x, y = y2)) + geom_point() +
  geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="lecture_4b_files/figure-html/point-5palette-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
`geom_smooth(se = FALSE)`

```r
ggplot(df, aes(x = x, y = y2)) + geom_point() +
  geom_smooth(se = FALSE)
```

&lt;img src="lecture_4b_files/figure-html/point-6palette-1.png" width="100%" style="display: block; margin: auto;" /&gt;


---
`geom_smooth(se = FALSE, span = 0.05)`

```r
ggplot(df, aes(x = x, y = y2)) + geom_point() +
  geom_smooth(se = FALSE, span = 0.05)
```

&lt;img src="lecture_4b_files/figure-html/point-7palette-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_smooth(se = FALSE, span = 0.2)`

```r
p1 &lt;- ggplot(df, aes(x = x, y = y2)) + geom_point() +
  geom_smooth(se = FALSE, span = 0.2)
p1
```

&lt;img src="lecture_4b_files/figure-html/point-8palette-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Interactivity with magic plotly


```r
library(plotly)
ggplotly(p1)
```

<div id="htmlwidget-c06b946c30e349f6a8d3" style="width:100%;height:288px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c06b946c30e349f6a8d3">{"x":{"data":[{"x":[0.322153201326728,0.487947705900297,0.739947075722739,0.074086005333811,0.656261431518942,0.0139315498527139,0.214519233442843,0.264504441525787,0.828956024022773,0.804622801486403,0.590347102610394,0.536889863433316,0.684357161168009,0.175561612937599,0.339662637095898,0.880184950074181,0.685551474569365,0.926303445128724,0.544163742568344,0.140237063169479,0.580929660936818,0.765216515865177,0.535238331649452,0.23466304782778,0.356016023783013,0.809171199565753,0.880682198563591,0.575239495607093,0.106048036832362,0.00314991432242095,0.49043303122744,0.462485491065308,0.822289385134354,0.076558013446629,0.635168167063966,0.834560906514525,0.221347241662443,0.297952961875126,0.830120519502088,0.0174593005795032,0.723726983880624,0.24686600570567,0.259828455513343,0.717012235196307,0.907228759024292,0.40989160281606,0.583986263489351,0.772606299258769,0.42251236946322,0.332892556209117,0.422078832052648,0.375872442731634,0.20478841336444,0.508543902775273,0.170038489159197,0.511754344915971,0.621041220845655,0.61283515393734,0.841583154397085,0.912784217158332,0.216425631428137,0.119864237029105,0.0614664936438203,0.148592796875164,0.0589717449620366,0.2542599667795,0.951433141482994,0.735234598396346,0.837526388699189,0.502513552783057,0.330045110778883,0.600401615258306,0.801893508993089,0.754942873260006,0.953809109050781,0.759335730224848,0.981037079822272,0.335583625361323,0.607836804352701,0.410193598363549,0.344800294842571,0.54059760295786,0.681304929545149,0.0603596800938249,0.320781139424071,0.389007376972586,0.550474459072575,0.495593102881685,0.106865980429575,0.971995095489547,0.539541341131553,0.862221665214747,0.782377705676481,0.474645481910557,0.366978837177157,0.449572765966877,0.0753125208429992,0.112096567405388,0.670603272039443,0.734240450663492],"y":[0.902569528989509,-0.151899806521814,2.04448843026258,0.273960697239994,-1.16189591982629,3.39639195116145,0.573170586340382,0.668529006685823,-0.030453048792713,1.19440052452295,-1.66586010756829,-0.624890244260485,-0.525305313676351,-0.205133315715308,-0.0823211819831733,1.92083110633428,1.30839010253276,0.700614360587951,1.11162635711369,-0.112070623838117,-0.688403788653271,1.95790372797511,-0.154221010281323,0.70566272358444,0.435250464239884,-0.0855271832189676,0.047454776091938,-0.459237653193643,1.53581664830719,1.47996418176336,0.417174373482287,-0.156708054342424,0.279401567725506,0.12601979639666,-0.285434217463021,0.532757915918674,-1.33215096682813,-0.0979905262080624,1.28460596567214,3.03282537430125,-0.460082268066292,0.530512475834171,0.24798341557878,-0.00504577660579369,-0.0704117443317895,-0.914848364183092,0.327627669268864,-0.17921498198138,-0.723763803668619,-0.689086392910522,0.961343643576201,0.724593083456727,0.0429846694937095,0.43470240726997,1.40560404315451,-0.366339968728189,-0.634024495319209,-1.56379510464559,0.274459788848261,1.84129043191222,0.191264854552596,-0.102863011775588,1.37385803279581,0.54584030165548,2.48855246288303,0.674561883211768,0.791570804256766,-0.525515846344611,0.563606195533749,-0.904554708813702,-2.0771740645688,0.545204162461296,-0.420289916313004,0.181982594651307,3.14728454236237,1.03693297262214,1.17521613111655,-0.387440568979407,1.3876765367502,0.73139913092315,-1.08302810830617,1.01127494564386,-1.58769874721273,2.34782514108977,-1.35308358023789,-1.22082730287962,-0.775329004055076,0.421577698105754,2.98670612174346,1.08208064888329,-1.15362865858237,-0.336946805466631,0.560113804898998,-2.39431702776689,1.07518749320695,-0.856775036982878,0.152688835732436,0.810288273191907,0.494758235808951,0.0467986132424027],"text":["x: 0.322153201<br />y2:  0.902569529","x: 0.487947706<br />y2: -0.151899807","x: 0.739947076<br />y2:  2.044488430","x: 0.074086005<br />y2:  0.273960697","x: 0.656261432<br />y2: -1.161895920","x: 0.013931550<br />y2:  3.396391951","x: 0.214519233<br />y2:  0.573170586","x: 0.264504442<br />y2:  0.668529007","x: 0.828956024<br />y2: -0.030453049","x: 0.804622801<br />y2:  1.194400525","x: 0.590347103<br />y2: -1.665860108","x: 0.536889863<br />y2: -0.624890244","x: 0.684357161<br />y2: -0.525305314","x: 0.175561613<br />y2: -0.205133316","x: 0.339662637<br />y2: -0.082321182","x: 0.880184950<br />y2:  1.920831106","x: 0.685551475<br />y2:  1.308390103","x: 0.926303445<br />y2:  0.700614361","x: 0.544163743<br />y2:  1.111626357","x: 0.140237063<br />y2: -0.112070624","x: 0.580929661<br />y2: -0.688403789","x: 0.765216516<br />y2:  1.957903728","x: 0.535238332<br />y2: -0.154221010","x: 0.234663048<br />y2:  0.705662724","x: 0.356016024<br />y2:  0.435250464","x: 0.809171200<br />y2: -0.085527183","x: 0.880682199<br />y2:  0.047454776","x: 0.575239496<br />y2: -0.459237653","x: 0.106048037<br />y2:  1.535816648","x: 0.003149914<br />y2:  1.479964182","x: 0.490433031<br />y2:  0.417174373","x: 0.462485491<br />y2: -0.156708054","x: 0.822289385<br />y2:  0.279401568","x: 0.076558013<br />y2:  0.126019796","x: 0.635168167<br />y2: -0.285434217","x: 0.834560907<br />y2:  0.532757916","x: 0.221347242<br />y2: -1.332150967","x: 0.297952962<br />y2: -0.097990526","x: 0.830120520<br />y2:  1.284605966","x: 0.017459301<br />y2:  3.032825374","x: 0.723726984<br />y2: -0.460082268","x: 0.246866006<br />y2:  0.530512476","x: 0.259828456<br />y2:  0.247983416","x: 0.717012235<br />y2: -0.005045777","x: 0.907228759<br />y2: -0.070411744","x: 0.409891603<br />y2: -0.914848364","x: 0.583986263<br />y2:  0.327627669","x: 0.772606299<br />y2: -0.179214982","x: 0.422512369<br />y2: -0.723763804","x: 0.332892556<br />y2: -0.689086393","x: 0.422078832<br />y2:  0.961343644","x: 0.375872443<br />y2:  0.724593083","x: 0.204788413<br />y2:  0.042984669","x: 0.508543903<br />y2:  0.434702407","x: 0.170038489<br />y2:  1.405604043","x: 0.511754345<br />y2: -0.366339969","x: 0.621041221<br />y2: -0.634024495","x: 0.612835154<br />y2: -1.563795105","x: 0.841583154<br />y2:  0.274459789","x: 0.912784217<br />y2:  1.841290432","x: 0.216425631<br />y2:  0.191264855","x: 0.119864237<br />y2: -0.102863012","x: 0.061466494<br />y2:  1.373858033","x: 0.148592797<br />y2:  0.545840302","x: 0.058971745<br />y2:  2.488552463","x: 0.254259967<br />y2:  0.674561883","x: 0.951433141<br />y2:  0.791570804","x: 0.735234598<br />y2: -0.525515846","x: 0.837526389<br />y2:  0.563606196","x: 0.502513553<br />y2: -0.904554709","x: 0.330045111<br />y2: -2.077174065","x: 0.600401615<br />y2:  0.545204162","x: 0.801893509<br />y2: -0.420289916","x: 0.754942873<br />y2:  0.181982595","x: 0.953809109<br />y2:  3.147284542","x: 0.759335730<br />y2:  1.036932973","x: 0.981037080<br />y2:  1.175216131","x: 0.335583625<br />y2: -0.387440569","x: 0.607836804<br />y2:  1.387676537","x: 0.410193598<br />y2:  0.731399131","x: 0.344800295<br />y2: -1.083028108","x: 0.540597603<br />y2:  1.011274946","x: 0.681304930<br />y2: -1.587698747","x: 0.060359680<br />y2:  2.347825141","x: 0.320781139<br />y2: -1.353083580","x: 0.389007377<br />y2: -1.220827303","x: 0.550474459<br />y2: -0.775329004","x: 0.495593103<br />y2:  0.421577698","x: 0.106865980<br />y2:  2.986706122","x: 0.971995095<br />y2:  1.082080649","x: 0.539541341<br />y2: -1.153628659","x: 0.862221665<br />y2: -0.336946805","x: 0.782377706<br />y2:  0.560113805","x: 0.474645482<br />y2: -2.394317028","x: 0.366978837<br />y2:  1.075187493","x: 0.449572766<br />y2: -0.856775037","x: 0.075312521<br />y2:  0.152688836","x: 0.112096567<br />y2:  0.810288273","x: 0.670603272<br />y2:  0.494758236","x: 0.734240451<br />y2:  0.046798613"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.00314991432242095,0.015528232873052,0.027906551423683,0.040284869974314,0.0526631885249451,0.0650415070755761,0.0774198256262071,0.0897981441768381,0.102176462727469,0.1145547812781,0.126933099828731,0.139311418379362,0.151689736929993,0.164068055480624,0.176446374031255,0.188824692581886,0.201203011132517,0.213581329683148,0.225959648233779,0.23833796678441,0.250716285335041,0.263094603885673,0.275472922436304,0.287851240986935,0.300229559537566,0.312607878088197,0.324986196638828,0.337364515189459,0.34974283374009,0.362121152290721,0.374499470841352,0.386877789391983,0.399256107942614,0.411634426493245,0.424012745043876,0.436391063594507,0.448769382145138,0.461147700695769,0.4735260192464,0.485904337797031,0.498282656347662,0.510660974898293,0.523039293448924,0.535417611999555,0.547795930550186,0.560174249100817,0.572552567651448,0.584930886202079,0.59730920475271,0.609687523303341,0.622065841853972,0.634444160404603,0.646822478955234,0.659200797505865,0.671579116056496,0.683957434607127,0.696335753157758,0.708714071708389,0.72109239025902,0.733470708809651,0.745849027360282,0.758227345910914,0.770605664461545,0.782983983012176,0.795362301562807,0.807740620113438,0.820118938664069,0.8324972572147,0.844875575765331,0.857253894315962,0.869632212866593,0.882010531417224,0.894388849967855,0.906767168518486,0.919145487069117,0.931523805619748,0.943902124170379,0.95628044272101,0.968658761271641,0.981037079822272],"y":[2.71923495473574,2.43531322521994,2.16918798290638,1.92022770600205,1.68780087271394,1.47034139577674,1.26630274650583,1.0577860135752,0.872218633432831,0.809489258887432,0.730254892770927,0.584697643749868,0.425774369205597,0.280661115761708,0.179664562465994,0.145526268855971,0.15317743281574,0.172614403175722,0.22586074291851,0.268579948817714,0.392795600783216,0.434689721959773,0.288613469872612,0.037492130764961,-0.233751113389995,-0.440193080619069,-0.497670118184265,-0.427176419213475,-0.27194731388371,-0.145235339945082,0.0283159494294154,0.144961196485334,0.0717089041042694,-0.130444221406213,-0.29674240423027,-0.431300902109955,-0.552807017388093,-0.611811026981642,-0.552438036451624,-0.422931744261153,-0.272546715528705,-0.100168959196945,-0.0637961395959393,-0.0890959325251927,-0.170191320651732,-0.21852061020999,-0.250769039861639,-0.283377745308985,-0.30725169348123,-0.332978615739901,-0.37615775643108,-0.397368226650273,-0.391915559089555,-0.385112762506316,-0.355969842078376,-0.282557274791816,-0.139889413073971,0.0348327792524365,0.200609827303654,0.404700610867025,0.54259674664846,0.692842283873799,0.741200556033522,0.612605545082677,0.443370281022945,0.37154228403388,0.341772360159213,0.361708387683612,0.411733592747683,0.494088716774379,0.570036098598481,0.673685092224658,0.79407813025396,0.913122320214376,1.02860799526523,1.14663094840977,1.25818599230129,1.35504174138784,1.43961895274045,1.51582318641189],"text":["x: 0.003149914<br />y2:  2.71923495","x: 0.015528233<br />y2:  2.43531323","x: 0.027906551<br />y2:  2.16918798","x: 0.040284870<br />y2:  1.92022771","x: 0.052663189<br />y2:  1.68780087","x: 0.065041507<br />y2:  1.47034140","x: 0.077419826<br />y2:  1.26630275","x: 0.089798144<br />y2:  1.05778601","x: 0.102176463<br />y2:  0.87221863","x: 0.114554781<br />y2:  0.80948926","x: 0.126933100<br />y2:  0.73025489","x: 0.139311418<br />y2:  0.58469764","x: 0.151689737<br />y2:  0.42577437","x: 0.164068055<br />y2:  0.28066112","x: 0.176446374<br />y2:  0.17966456","x: 0.188824693<br />y2:  0.14552627","x: 0.201203011<br />y2:  0.15317743","x: 0.213581330<br />y2:  0.17261440","x: 0.225959648<br />y2:  0.22586074","x: 0.238337967<br />y2:  0.26857995","x: 0.250716285<br />y2:  0.39279560","x: 0.263094604<br />y2:  0.43468972","x: 0.275472922<br />y2:  0.28861347","x: 0.287851241<br />y2:  0.03749213","x: 0.300229560<br />y2: -0.23375111","x: 0.312607878<br />y2: -0.44019308","x: 0.324986197<br />y2: -0.49767012","x: 0.337364515<br />y2: -0.42717642","x: 0.349742834<br />y2: -0.27194731","x: 0.362121152<br />y2: -0.14523534","x: 0.374499471<br />y2:  0.02831595","x: 0.386877789<br />y2:  0.14496120","x: 0.399256108<br />y2:  0.07170890","x: 0.411634426<br />y2: -0.13044422","x: 0.424012745<br />y2: -0.29674240","x: 0.436391064<br />y2: -0.43130090","x: 0.448769382<br />y2: -0.55280702","x: 0.461147701<br />y2: -0.61181103","x: 0.473526019<br />y2: -0.55243804","x: 0.485904338<br />y2: -0.42293174","x: 0.498282656<br />y2: -0.27254672","x: 0.510660975<br />y2: -0.10016896","x: 0.523039293<br />y2: -0.06379614","x: 0.535417612<br />y2: -0.08909593","x: 0.547795931<br />y2: -0.17019132","x: 0.560174249<br />y2: -0.21852061","x: 0.572552568<br />y2: -0.25076904","x: 0.584930886<br />y2: -0.28337775","x: 0.597309205<br />y2: -0.30725169","x: 0.609687523<br />y2: -0.33297862","x: 0.622065842<br />y2: -0.37615776","x: 0.634444160<br />y2: -0.39736823","x: 0.646822479<br />y2: -0.39191556","x: 0.659200798<br />y2: -0.38511276","x: 0.671579116<br />y2: -0.35596984","x: 0.683957435<br />y2: -0.28255727","x: 0.696335753<br />y2: -0.13988941","x: 0.708714072<br />y2:  0.03483278","x: 0.721092390<br />y2:  0.20060983","x: 0.733470709<br />y2:  0.40470061","x: 0.745849027<br />y2:  0.54259675","x: 0.758227346<br />y2:  0.69284228","x: 0.770605664<br />y2:  0.74120056","x: 0.782983983<br />y2:  0.61260555","x: 0.795362302<br />y2:  0.44337028","x: 0.807740620<br />y2:  0.37154228","x: 0.820118939<br />y2:  0.34177236","x: 0.832497257<br />y2:  0.36170839","x: 0.844875576<br />y2:  0.41173359","x: 0.857253894<br />y2:  0.49408872","x: 0.869632213<br />y2:  0.57003610","x: 0.882010531<br />y2:  0.67368509","x: 0.894388850<br />y2:  0.79407813","x: 0.906767169<br />y2:  0.91312232","x: 0.919145487<br />y2:  1.02860800","x: 0.931523806<br />y2:  1.14663095","x: 0.943902124<br />y2:  1.25818599","x: 0.956280443<br />y2:  1.35504174","x: 0.968658761<br />y2:  1.43961895","x: 0.981037080<br />y2:  1.51582319"],"type":"scatter","mode":"lines","name":"fitted values","line":{"width":3.77952755905512,"color":"rgba(51,102,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":30.6118721461187,"r":7.30593607305936,"b":44.5662100456621,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0457444439525716,1.02993143809726],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"x","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.68385247671331,3.68592740010786],"tickmode":"array","ticktext":["-2","0","2"],"tickvals":[-2,0,2],"categoryorder":"array","categoryarray":["-2","0","2"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"y2","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"8a9e69c3b66b":{"x":{},"y":{},"type":"scatter"},"8a9e2ffd610c":{"x":{},"y":{}}},"cur_data":"8a9e69c3b66b","visdat":{"8a9e69c3b66b":["function (y) ","x"],"8a9e2ffd610c":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>


---
# Themes: Add some style to your plot

.left-code[

```r
p &lt;- ggplot(mtcars) +
  geom_point(aes(x = wt, 
                 y = mpg, 
                 colour = factor(gear))) +
  facet_wrap(~am)
p

```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/mtcars-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---
# Theme: theme_minimal

.left-code[

```r
p + 
  theme_minimal()
```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/mtcars-minimal-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]
---
# Theme: ggthemes `theme_few()`

.left-code[

```r
p + 
  theme_few() + 
  scale_colour_few()
```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/mtcars-theme-few-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---
# Theme: ggthemes `theme_excel()` 😷

.left-code[

```r
p + 
  theme_excel() + 
  scale_colour_excel()
```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/mtcars-theme-excel-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]
---
# Theme: for fun

.left-code[

```r
library(wesanderson)
p + 
  scale_colour_manual(
    values = wes_palette("Royal1")
    )

```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/theme-wes-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---
# Summary: themes

- The `ggthemes` package has many different styles for the plots. 
- Other packages such as `xkcd`, `skittles`, `wesanderson`, `beyonce`, `ochre`, ....

---
# Hierarchy of mappings

1. Position - common scale (BEST): axis system
2. Position - nonaligned scale: boxes in a side-by-side boxplot
3. Length, direction, angle: pie charts, regression lines, wind maps
4. Area: bubble charts
5. Volume, curvature: 3D plots
6. Shading, color (WORST): maps, points coloured by numeric variable

- [Di's crowd-sourcing expt](http://visiphilia.org/2016/08/03/CM-hierarchy)
- Nice explanation by [Peter Aldous](http://paldhous.github.io/ucb/2016/dataviz/week2.html)
- [General plotting advice and a book from Naomi Robbins](https://www.forbes.com/sites/naomirobbins/#2b1e20082a6a)

---
# Your Turn:

- lab quiz open (requires answering questions from Lab exercise)
- go to rstudio.cloud and check out exercise 4-B
- If you want to use R / Rstudio on your laptop:
  - Install R + Rstudio (see )
  - open R
  - type the following:
  ```r
  # install.packages("usethis")
  library(usethis)
  use_course("bit.ly/ida-2020-exercise-4b.zip")
  ```

---

# Resources

- Kieran Healy [Data Visualization](http://socviz.co/index.html)
- Winston Chang (2012) [Cookbook for R](graphics cookbook)
- Antony Unwin (2014) [Graphical Data Analysis](http://www.gradaanwr.net)
- Naomi Robbins (2013) [Creating More Effective Charts](http://www.nbr-graphs.com)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLanguage": "r",
"highlightLines": true,
"highlightSpans": false,
"countIncrementalSlides": false,
"slideNumberFormat": "%current%/%total%",
"navigation": {
"scroll": false,
"touch": true,
"click": false
},
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  /* Replace <script> tags in slides area to make them executable
   *
   * Runs after post-processing of markdown source into slides and replaces only
   * <script>s on the last slide of continued slides using the .has-continuation
   * class added by xaringan. Finally, any <script>s in the slides area that
   * aren't executed are commented out.
   */
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container:not(.has-continuation) script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
  var scriptsNotExecuted = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container.has-continuation script'
  );
  if (!scriptsNotExecuted.length) return;
  for (var i = 0; i < scriptsNotExecuted.length; i++) {
    var comment = document.createComment(scriptsNotExecuted[i].outerHTML)
    scriptsNotExecuted[i].parentElement.replaceChild(comment, scriptsNotExecuted[i])
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'assets/mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
