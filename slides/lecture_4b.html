<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>ETC1010: Introduction to Data Analysis</title>
    <meta charset="utf-8" />
    <meta name="author" content="Nicholas Tierney" />
    <script src="libs/header-attrs-2.1/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/ninjutsu.css" rel="stylesheet" />
    <link href="libs/font-awesome-animation-1.0/font-awesome-animation-emi.css" rel="stylesheet" />
    <script src="libs/fontawesome-5.0.13/js/fontawesome-all.min.js"></script>
    <script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
    <script src="libs/plotly-binding-4.9.2/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <script src="libs/jquery-1.11.3/jquery.min.js"></script>
    <link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
    <!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> 
    -->
    <link rel="icon" href="images/favicon.ico"  type='image/x-icon'/>    
    <link rel="stylesheet" href="assets/animate.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-logo.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-brand.css" type="text/css" />
    <link rel="stylesheet" href="assets/monash-fonts.css" type="text/css" />
    <link rel="stylesheet" href="assets/styles.css" type="text/css" />
    <link rel="stylesheet" href="assets/custom.css" type="text/css" />
    <link rel="stylesheet" href="assets/demo.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

  


&lt;!-- background-color: #006DAE --&gt;
&lt;!-- class: middle center hide-slide-number --&gt;

&lt;div class="shade_black"  style="width:60%;right:0;bottom:0;padding:10px;border: dashed 4px white;margin: auto;"&gt;
&lt;i class="fas fa-exclamation-circle"&gt;&lt;/i&gt; These slides are viewed best by Chrome and occasionally need to be refreshed if elements did not load properly. See &lt;a href=/&gt;here for PDF &lt;i class="fas fa-file-pdf"&gt;&lt;/i&gt;&lt;/a&gt;.
&lt;/div&gt;

&lt;br&gt;

.white[Press the **right arrow** to progress to the next slide!]

---

background-image: url(images/bg1.jpg)
background-size: cover
class: hide-slide-number split-70 title-slide
count: false

.column.shade_black[.content[

&lt;br&gt;

# .monash-blue.outline-text[ETC1010: Introduction to Data Analysis]

&lt;h2 class="monash-blue2 outline-text" style="font-size: 30pt!important;"&gt;Week 4, part B&lt;/h2&gt;

&lt;br&gt;

&lt;h2 style="font-weight:900!important;"&gt;Advanced topics in data visualisation&lt;/h2&gt;

.bottom_abs.width100[

Lecturer: *Nicholas Tierney*

Department of Econometrics and Business Statistics

<span>&lt;i class="fas  fa-envelope faa-float animated "&gt;&lt;/i&gt;</span>  ETC1010.Clayton-x@monash.edu

April 2020

&lt;br&gt;
]


]]



&lt;div class="column transition monash-m-new delay-1s" style="clip-path:url(#swipe__clip-path);"&gt;
&lt;div class="background-image" style="background-image:url('images/large.png');background-position: center;background-size:cover;margin-left:3px;"&gt;
&lt;svg class="clip-svg absolute"&gt;
&lt;defs&gt;
&lt;clipPath id="swipe__clip-path" clipPathUnits="objectBoundingBox"&gt;
&lt;polygon points="0.5745 0, 0.5 0.33, 0.42 0, 0 0, 0 1, 0.27 1, 0.27 0.59, 0.37 1, 0.634 1, 0.736 0.59, 0.736 1, 1 1, 1 0, 0.5745 0" /&gt;
&lt;/clipPath&gt;
&lt;/defs&gt;	
&lt;/svg&gt;
&lt;/div&gt;
&lt;/div&gt;






---
class: transition
# While the song is playing...

Draw a mental model / concept map of last lectures content on joins.

---
class: refresher
# recap

- Joins

---

# Joins with a person and a coat, by [Leight Tami](https://twitter.com/leigh_tami18/status/1021471889309487105/photo/1)

&lt;img src="images/joins_using_coat.jpg" width="100%" style="display: block; margin: auto;" /&gt;

---
# Upcoming Due Dates

- Assignment 1: Due April 8 at 5pm (Today!)



---

# Exploring life expectancy and income

We want to plot life expectancy vs income, but there's a problem:

.pull-left[

```r
gap_life_au
## # A tibble: 9 x 3
##   country    year life_expectancy
##   &lt;chr&gt;     &lt;dbl&gt;           &lt;dbl&gt;
## 1 Australia  2012            82.5
## 2 Australia  2013            82.6
## 3 Australia  2014            82.5
## 4 Australia  2015            82.5
## 5 Australia  2016            82.5
## 6 Australia  2017            82.4
## 7 Australia  2018            82.5
## 8 Australia  2019            82.7
## 9 Australia  2020            82.8
```
]

.pull-right[

```r
gap_income_au
## # A tibble: 9 x 3
##   country    year   gdp
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 Australia  2012 42800
## 2 Australia  2013 43200
## 3 Australia  2014 43700
## 4 Australia  2015 44100
## 5 Australia  2016 44600
## 6 Australia  2017 44900
## 7 Australia  2018 45400
## 8 Australia  2019 45500
## 9 Australia  2020 45800
```
]

---

# We need them in the same dataframe!

We could try `bind_cols()`, to bind dataframes columns together


```r
bind_cols(gap_life_au,
          gap_income_au)
## # A tibble: 9 x 6
##   country    year life_expectancy country1  year1   gdp
##   &lt;chr&gt;     &lt;dbl&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 Australia  2012            82.5 Australia  2012 42800
## 2 Australia  2013            82.6 Australia  2013 43200
## 3 Australia  2014            82.5 Australia  2014 43700
## 4 Australia  2015            82.5 Australia  2015 44100
## 5 Australia  2016            82.5 Australia  2016 44600
## 6 Australia  2017            82.4 Australia  2017 44900
## 7 Australia  2018            82.5 Australia  2018 45400
## 8 Australia  2019            82.7 Australia  2019 45500
## 9 Australia  2020            82.8 Australia  2020 45800
```

---

# But this has problems:

1. It produces messy output (country1, year1)
2. It doesn't work if the data doesn't have the same number of rows



```
## # A tibble: 9 x 6
##   country    year life_expectancy country1  year1   gdp
##   &lt;chr&gt;     &lt;dbl&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 Australia  2012            82.5 Australia  2012 42800
## 2 Australia  2013            82.6 Australia  2013 43200
## 3 Australia  2014            82.5 Australia  2014 43700
## 4 Australia  2015            82.5 Australia  2015 44100
## 5 Australia  2016            82.5 Australia  2016 44600
## 6 Australia  2017            82.4 Australia  2017 44900
## 7 Australia  2018            82.5 Australia  2018 45400
## 8 Australia  2019            82.7 Australia  2019 45500
## 9 Australia  2020            82.8 Australia  2020 45800
```

---

# How to bind data?

For example, how do we add this co2 data to income or life?


```r
gap_co2_au
## # A tibble: 3 x 3
##   country    year   co2
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 Australia  2012  17  
## 2 Australia  2013  16.1
## 3 Australia  2014  15.4
```


---

# How to bind data?

We can't use `bind_cols()`


```r
bind_cols(gap_co2_au,
          gap_income_au)
```

```
Error: Argument 2 must be length 3, not 9
```

--

We could think about a more complex approach using `filter`, and so on...

--

But surely this must be a problem that we encounter in data analysis?

--

Someone must have thought of a solution to this before?

--


They did! **Joins**!

---

# Joins!

We can use ` left_join()` to combine the income and life expectancy data


```r
left_join(x = gap_income_au,
          y = gap_life_au,
          by = c("country", "year"))
## # A tibble: 9 x 4
##   country    year   gdp life_expectancy
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;
## 1 Australia  2012 42800            82.5
## 2 Australia  2013 43200            82.6
## 3 Australia  2014 43700            82.5
## 4 Australia  2015 44100            82.5
## 5 Australia  2016 44600            82.5
## 6 Australia  2017 44900            82.4
## 7 Australia  2018 45400            82.5
## 8 Australia  2019 45500            82.7
## 9 Australia  2020 45800            82.8
```

---

# Add co2 data with another join:

We get missings for co2, because we don't have c02 values for 2015 and beyond.


```r
left_join(x = gap_income_au,
          y = gap_life_au,
          by = c("country", "year")) %&gt;% 
  left_join(gap_co2_au,
            by = c("country", "year"))
## # A tibble: 9 x 5
##   country    year   gdp life_expectancy   co2
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1 Australia  2012 42800            82.5  17  
## 2 Australia  2013 43200            82.6  16.1
## 3 Australia  2014 43700            82.5  15.4
## 4 Australia  2015 44100            82.5  NA  
## 5 Australia  2016 44600            82.5  NA  
## 6 Australia  2017 44900            82.4  NA  
## 7 Australia  2018 45400            82.5  NA  
## 8 Australia  2019 45500            82.7  NA  
## 9 Australia  2020 45800            82.8  NA
```


---

# So now we can combine that together like so:


```r
gap_au &lt;- left_join(x = gap_income_au,
          y = gap_life_au,
          by = c("country", "year")) %&gt;% 
  left_join(gap_co2_au,
            by = c("country", "year"))

gap_au
## # A tibble: 9 x 5
##   country    year   gdp life_expectancy   co2
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1 Australia  2012 42800            82.5  17  
## 2 Australia  2013 43200            82.6  16.1
## 3 Australia  2014 43700            82.5  15.4
## 4 Australia  2015 44100            82.5  NA  
## 5 Australia  2016 44600            82.5  NA  
## 6 Australia  2017 44900            82.4  NA  
## 7 Australia  2018 45400            82.5  NA  
## 8 Australia  2019 45500            82.7  NA  
## 9 Australia  2020 45800            82.8  NA
```

---

# Now we can make a plot!


```r
ggplot(gap_au,
       aes(x = gdp,
           y = life_expectancy)) + 
  geom_point()
```

&lt;img src="lecture_4b_files/figure-html/plot-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

# Your Turn: go to exercises on rstudio.cloud 

open "joins.Rmd"

Discuss with your partner why these two joins produce different results?

.pull-left[

```r
left_join(gap_co2_au,
          gap_life_au)
## # A tibble: 3 x 4
##   country    year   co2 life_expectancy
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;
## 1 Australia  2012  17              82.5
## 2 Australia  2013  16.1            82.6
## 3 Australia  2014  15.4            82.5
```
]

.pull-right[

```r
left_join(gap_life_au,
          gap_co2_au)
## # A tibble: 9 x 4
##   country    year life_expectancy   co2
##   &lt;chr&gt;     &lt;dbl&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1 Australia  2012            82.5  17  
## 2 Australia  2013            82.6  16.1
## 3 Australia  2014            82.5  15.4
## 4 Australia  2015            82.5  NA  
## 5 Australia  2016            82.5  NA  
## 6 Australia  2017            82.4  NA  
## 7 Australia  2018            82.5  NA  
## 8 Australia  2019            82.7  NA  
## 9 Australia  2020            82.8  NA
```
]

---
class: transition
# Your Turn: 

What happens when we add data from New Zealand into the mix? 

How can you join that data together?

---
class: transition

# Making effective data plots

1. Principles / science of data visualisation
2. Features of graphics

---
# Principles / science of data visualisation

  - Palettes and colour blindness
  - change blindness
  - using proximity
  - hierarchy of mappings

---
# Features of graphics 

- Layering statistical summaries
- Themes
- adding interactivity

---
# Palettes and colour blindness

There are three main types of colour palette:

- Qualitative: categorical variables
- Sequential: low to high numeric values
- Diverging: negative to positive values

---
# Qualitative: categorical variables

&lt;img src="lecture_4b_files/figure-html/print-qual-pal-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Sequential: low to high numeric values

&lt;img src="lecture_4b_files/figure-html/print-seq-pal-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Diverging: negative to positive values

&lt;img src="lecture_4b_files/figure-html/print-div-pal-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Example: TB data


```
## # A tibble: 157,820 x 5
##    country      year count gender age  
##    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;
##  1 Afghanistan  1980    NA m      04   
##  2 Afghanistan  1981    NA m      04   
##  3 Afghanistan  1982    NA m      04   
##  4 Afghanistan  1983    NA m      04   
##  5 Afghanistan  1984    NA m      04   
##  6 Afghanistan  1985    NA m      04   
##  7 Afghanistan  1986    NA m      04   
##  8 Afghanistan  1987    NA m      04   
##  9 Afghanistan  1988    NA m      04   
## 10 Afghanistan  1989    NA m      04   
## # … with 157,810 more rows
```

---
# Example: TB data: adding relative change


```
## # A tibble: 219 x 4
##    country             `2002` `2012`  reldif
##    &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1 Afghanistan           6509  13907  1.14  
##  2 Albania                225    185 -0.178 
##  3 Algeria               8246   7510 -0.0893
##  4 American Samoa           1      0 -1     
##  5 Andorra                  2      2  0     
##  6 Angola               17988  22106  0.229 
##  7 Anguilla                 0      0  0     
##  8 Antigua and Barbuda      4      1 -0.75  
##  9 Argentina             5383   4787 -0.111 
## 10 Armenia                511    316 -0.382 
## # … with 209 more rows
```




---
# Example: Sequential colour with default palette


```r
ggplot(tb_map) + geom_polygon(aes(x = long, y = lat, group = group, fill = reldif)) +
  theme_map()
```

&lt;img src="lecture_4b_files/figure-html/map-default-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---
# Example: (improved) sequential colour with default palette


```r
library(viridis)
ggplot(tb_map) +
  geom_polygon(aes(x = long, y = lat, group = group, fill = reldif)) +
  theme_map() + scale_fill_viridis(na.value = "white")
```

&lt;img src="lecture_4b_files/figure-html/viridis-plot-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---
# Example:  Diverging colour with better palette


```r
ggplot(tb_map) +
  geom_polygon(aes(x = long, y = lat, group = group, fill = reldif)) +
  theme_map() +
  scale_fill_distiller(palette = "PRGn", na.value = "white", limits = c(-7, 7))
```

&lt;img src="lecture_4b_files/figure-html/map-distiller-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---
# Summary on colour palettes

- Different ways to map colour to values:
  - Qualitative: categorical variables
  - Sequential: low to high numeric values
  - Diverging: negative to positive values

---
# Colour blindness

- About 8% of men (about 1 in 12), and 0.5% women (about 1 in 200) population have difficulty distinguishing between red and green. 
- Several colour blind tested palettes: RColorbrewer has an associated web site [colorbrewer.org](http://colorbrewer2.org) where the palettes are labelled. See also `viridis`, and `scico`.

---
# Plot of two coloured points: Normal Mode

&lt;img src="lecture_4b_files/figure-html/colour-blind-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Plot of two coloured points: dicromat mode

&lt;img src="lecture_4b_files/figure-html/colour-blind-2-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Showing all types of colourblindness

&lt;img src="lecture_4b_files/figure-html/colourblindr-show-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Impact of colourblind-safe palette

```r
p2 &lt;- p + scale_colour_brewer(palette = "Dark2")
p2
```

&lt;img src="lecture_4b_files/figure-html/colourblindr-brewer-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Impact of colourblind-safe palette
&lt;img src="lecture_4b_files/figure-html/cb-grid-1.png" width="100%" style="display: block; margin: auto;" /&gt;


---
# Impact of colourblind-safe palette

```r
p3 &lt;- p + scale_colour_viridis_d()
p3
```

&lt;img src="lecture_4b_files/figure-html/colourblindr-viridis-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Impact of colourblind-safe palette
&lt;img src="lecture_4b_files/figure-html/cb-grid-viridis-1.png" width="100%" style="display: block; margin: auto;" /&gt;


---
# Summary colour blindness

- Apply colourblind-friendly colourscales
  - `+ scale_colour_viridis()`
  - `+ scale_colour_brewer(palette = "Dark2")`
  - `scico` R package

---
# Pre-attentiveness: Find the odd one out?

&lt;img src="lecture_4b_files/figure-html/pre-attentiveness-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Pre-attentiveness: Find the odd one out?

&lt;img src="lecture_4b_files/figure-html/pre-attentive-easier-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
class: idea
# Using proximity in your plots

Basic rule: place the groups that you want to compare close to each other



---
# Which plot answers which question?

- "Is the incidence similar for males and females in 2012 across age groups?"
- "Is the incidence similar for age groups in 2012, across gender?" 

---
# incidence similar for: (M and F) or (age, across gender) ?" 



&lt;img src="lecture_4b_files/figure-html/print-many-tb-1.png" width="100%" style="display: block; margin: auto;" /&gt;&lt;img src="lecture_4b_files/figure-html/print-many-tb-2.png" width="100%" style="display: block; margin: auto;" /&gt;

???

Here are two different arrangements of the tb data. To answer the question "Is the incidence similar for males and females in 2012 across age groups?" the first arrangement is better. It puts males and females right beside each other, so the relative heights of the bars can be seen quickly. The answer to the question would be "No, the numbers were similar in youth, but males are more affected with increasing age."

The second arrangement puts the focus on age groups, and is better to answer the question "Is the incidence similar for age groups in 2012, across gender?" To which the answer would be "No, among females, the incidence is higher at early ages. For males, the incidence is much more uniform across age groups."


---
# "Incidence similar for M &amp; F in 2012 across age?"

&lt;img src="lecture_4b_files/figure-html/gg-fill-gender-print-1.png" width="100%" style="display: block; margin: auto;" /&gt;

- Males &amp; females next to each other: relative heights of bars is seen quickly. 
- Auestion answer: "No, the numbers were similar in youth, but males are more affected with increasing age."

---
# "Incidence similar for age in 2012, across gender?"

&lt;img src="lecture_4b_files/figure-html/gg-fill-age-print-1.png" width="100%" style="display: block; margin: auto;" /&gt;

- Puts the focus on age groups 
- Answer to the question: "No, among females, the incidence is higher at early ages. For males, the incidence is much more uniform across age groups."

---
# Proximity wrap up

- Facetting of plots, and proximity are related to change blindness, an area of study in cognitive psychology. 
- There are a series of fabulous videos illustrating the effects of making a visual break, on how the mind processes it by Daniel Simons lab. 
- Here's one example:  
[The door study](https://www.youtube.com/watch?v=FWSxSQsspiQ)

---
# Layering

- *Statistical summaries:* It is common to layer plots, particularly by adding statistical summaries, like a model fit, or means and standard deviations. The purpose is to show the **trend** in relation to the **variation**. 
- *Maps:* Commonly maps provide the framework for data collected spatially. One layer for the map, and another for the data.



---
# `geom_point()`

```r
ggplot(df, aes(x = x, y = y1)) + geom_point()
```

&lt;img src="lecture_4b_files/figure-html/point-1-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_smooth(method = "lm", se = FALSE)`

```r
ggplot(df, aes(x = x, y = y1)) + geom_point() +
  geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="lecture_4b_files/figure-html/point-2-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_smooth(method = "lm")`

```r
ggplot(df, aes(x = x, y = y1)) + geom_point() +
  geom_smooth(method = "lm")
```

&lt;img src="lecture_4b_files/figure-html/point-3-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_point()`


```r
ggplot(df, aes(x = x, y = y2)) + geom_point()
```

&lt;img src="lecture_4b_files/figure-html/point-4-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_smooth(method = "lm", se = FALSE)`

```r
ggplot(df, aes(x = x, y = y2)) + geom_point() +
  geom_smooth(method = "lm", se = FALSE)
```

&lt;img src="lecture_4b_files/figure-html/point-5palette-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
`geom_smooth(se = FALSE)`

```r
ggplot(df, aes(x = x, y = y2)) + geom_point() +
  geom_smooth(se = FALSE)
```

&lt;img src="lecture_4b_files/figure-html/point-6palette-1.png" width="100%" style="display: block; margin: auto;" /&gt;


---
`geom_smooth(se = FALSE, span = 0.05)`

```r
ggplot(df, aes(x = x, y = y2)) + geom_point() +
  geom_smooth(se = FALSE, span = 0.05)
```

&lt;img src="lecture_4b_files/figure-html/point-7palette-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# `geom_smooth(se = FALSE, span = 0.2)`

```r
p1 &lt;- ggplot(df, aes(x = x, y = y2)) + geom_point() +
  geom_smooth(se = FALSE, span = 0.2)
p1
```

&lt;img src="lecture_4b_files/figure-html/point-8palette-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Interactivity with magic plotly


```r
library(plotly)
ggplotly(p1)
```

<div id="htmlwidget-e5e93641d776dd6f994a" style="width:100%;height:288px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5e93641d776dd6f994a">{"x":{"data":[{"x":[0.276067427359521,0.429858959745616,0.737466831691563,0.372140194056556,0.684667946072295,0.131316502345726,0.449373965151608,0.035605872515589,0.888332461006939,0.018249288899824,0.227297344245017,0.406061685876921,0.672977769980207,0.697430223925039,0.354126241989434,0.335659062955528,0.698348041623831,0.880994334816933,0.294264084426686,0.298427594825625,0.859488208079711,0.262412945972756,0.0729962110053748,0.45302612753585,0.842054346809164,0.970120858866721,0.47042817575857,0.961128880036995,0.337645917665213,0.698872878681868,0.657252277713269,0.78380289231427,0.846966758137569,0.344875843031332,0.579586607404053,0.558542673708871,0.54425834515132,0.76306226151064,0.556187241803855,0.046552165877074,0.151967196725309,0.956807552138343,0.0910563301295042,0.299071876332164,0.587203220231459,0.26914374041371,0.899292478803545,0.653659526724368,0.286666423315182,0.864986419212073,0.340847371378914,0.902225474594161,0.582509594736621,0.929182805120945,0.979352226248011,0.359387254575267,0.47077234252356,0.208693394903094,0.772863181075081,0.95133501291275,0.443784698378295,0.342361567076296,0.528240366140381,0.0473896192852408,0.302414003061131,0.0547605506144464,0.228777257725596,0.753558513708413,0.531119122868404,0.857072861865163,0.285374263301492,0.784277709433809,0.272864247206599,0.379938504192978,0.458414494758472,0.453152818605304,0.315460645128042,0.807842123322189,0.226504091406241,0.0165416493546218,0.768983033951372,0.548757606185973,0.285532569047064,0.255382630508393,0.279681098414585,0.743143789004534,0.392088911496103,0.543694616062567,0.178663526428863,0.716550362529233,0.510443658102304,0.400594097562134,0.375531261321157,0.555668752407655,0.576443780912086,0.0525814471766353,0.392138700699434,0.454748564166948,0.536956866737455,0.713837709510699],"y":[1.204014212147,1.51929828997495,0.706118477743548,-0.45777813987202,-1.39553166594289,1.7695712228203,0.385765122009762,3.08811277156196,-0.526006509040801,1.50689470720678,1.26878523771844,1.5072702565162,-0.266172390175055,-1.46199247578191,0.7965223704886,-0.743421750900293,1.81065117556095,0.568680039187569,-0.691803367378739,-0.55667880941873,-0.933088833044435,0.778133560638925,2.6935479556567,-1.57749604768473,0.51687949737657,2.39011489237103,1.00528190158445,1.66986807370222,1.34630235914705,0.468156311778345,-0.328337053856568,0.381207975486844,1.15525661845334,-0.141697692168558,1.34628503547253,-1.54075564202411,-1.15563864607859,0.0279937297913318,-0.426273278840637,3.12625985266235,1.500662618219,1.72973138922536,1.8650263579173,0.00398010396217278,-2.31244448647344,1.21992882815751,2.8882374722836,0.656463745420891,-0.170613764082692,0.413027137480285,0.582216774054118,1.27032279606575,1.05230129868672,0.00786198776359126,2.25039391198015,0.700857991417148,-0.367923427846094,1.13493334605306,1.27414672718043,0.699049102774566,0.0825248918066664,-0.198152912448865,0.318252069277328,3.02639156126163,-0.260833063225365,2.21667489927111,1.22161017370213,1.7045989639956,1.36238985874903,0.748425220916943,0.446611782914008,-0.164714629349164,0.919599619337983,-1.41569541677966,0.288790491457718,-0.640581007445591,-0.180047585021817,2.39894893931325,1.251584273333,1.23148715207253,-0.164663792709063,0.475652640546228,-1.56529583486133,-1.27551691943352,0.138195700845688,0.0641107886050577,0.0457159731737579,-1.68522241282098,0.477429640908023,0.568142348045638,1.3393042029522,-1.26997534189552,0.29188910425542,-0.638403010925044,-2.04434477018409,2.24535918678457,-0.882744696676511,-0.271745545651955,-0.0350001767089965,-1.24175010416799],"text":["x: 0.27606743<br />y2:  1.204014212","x: 0.42985896<br />y2:  1.519298290","x: 0.73746683<br />y2:  0.706118478","x: 0.37214019<br />y2: -0.457778140","x: 0.68466795<br />y2: -1.395531666","x: 0.13131650<br />y2:  1.769571223","x: 0.44937397<br />y2:  0.385765122","x: 0.03560587<br />y2:  3.088112772","x: 0.88833246<br />y2: -0.526006509","x: 0.01824929<br />y2:  1.506894707","x: 0.22729734<br />y2:  1.268785238","x: 0.40606169<br />y2:  1.507270257","x: 0.67297777<br />y2: -0.266172390","x: 0.69743022<br />y2: -1.461992476","x: 0.35412624<br />y2:  0.796522370","x: 0.33565906<br />y2: -0.743421751","x: 0.69834804<br />y2:  1.810651176","x: 0.88099433<br />y2:  0.568680039","x: 0.29426408<br />y2: -0.691803367","x: 0.29842759<br />y2: -0.556678809","x: 0.85948821<br />y2: -0.933088833","x: 0.26241295<br />y2:  0.778133561","x: 0.07299621<br />y2:  2.693547956","x: 0.45302613<br />y2: -1.577496048","x: 0.84205435<br />y2:  0.516879497","x: 0.97012086<br />y2:  2.390114892","x: 0.47042818<br />y2:  1.005281902","x: 0.96112888<br />y2:  1.669868074","x: 0.33764592<br />y2:  1.346302359","x: 0.69887288<br />y2:  0.468156312","x: 0.65725228<br />y2: -0.328337054","x: 0.78380289<br />y2:  0.381207975","x: 0.84696676<br />y2:  1.155256618","x: 0.34487584<br />y2: -0.141697692","x: 0.57958661<br />y2:  1.346285035","x: 0.55854267<br />y2: -1.540755642","x: 0.54425835<br />y2: -1.155638646","x: 0.76306226<br />y2:  0.027993730","x: 0.55618724<br />y2: -0.426273279","x: 0.04655217<br />y2:  3.126259853","x: 0.15196720<br />y2:  1.500662618","x: 0.95680755<br />y2:  1.729731389","x: 0.09105633<br />y2:  1.865026358","x: 0.29907188<br />y2:  0.003980104","x: 0.58720322<br />y2: -2.312444486","x: 0.26914374<br />y2:  1.219928828","x: 0.89929248<br />y2:  2.888237472","x: 0.65365953<br />y2:  0.656463745","x: 0.28666642<br />y2: -0.170613764","x: 0.86498642<br />y2:  0.413027137","x: 0.34084737<br />y2:  0.582216774","x: 0.90222547<br />y2:  1.270322796","x: 0.58250959<br />y2:  1.052301299","x: 0.92918281<br />y2:  0.007861988","x: 0.97935223<br />y2:  2.250393912","x: 0.35938725<br />y2:  0.700857991","x: 0.47077234<br />y2: -0.367923428","x: 0.20869339<br />y2:  1.134933346","x: 0.77286318<br />y2:  1.274146727","x: 0.95133501<br />y2:  0.699049103","x: 0.44378470<br />y2:  0.082524892","x: 0.34236157<br />y2: -0.198152912","x: 0.52824037<br />y2:  0.318252069","x: 0.04738962<br />y2:  3.026391561","x: 0.30241400<br />y2: -0.260833063","x: 0.05476055<br />y2:  2.216674899","x: 0.22877726<br />y2:  1.221610174","x: 0.75355851<br />y2:  1.704598964","x: 0.53111912<br />y2:  1.362389859","x: 0.85707286<br />y2:  0.748425221","x: 0.28537426<br />y2:  0.446611783","x: 0.78427771<br />y2: -0.164714629","x: 0.27286425<br />y2:  0.919599619","x: 0.37993850<br />y2: -1.415695417","x: 0.45841449<br />y2:  0.288790491","x: 0.45315282<br />y2: -0.640581007","x: 0.31546065<br />y2: -0.180047585","x: 0.80784212<br />y2:  2.398948939","x: 0.22650409<br />y2:  1.251584273","x: 0.01654165<br />y2:  1.231487152","x: 0.76898303<br />y2: -0.164663793","x: 0.54875761<br />y2:  0.475652641","x: 0.28553257<br />y2: -1.565295835","x: 0.25538263<br />y2: -1.275516919","x: 0.27968110<br />y2:  0.138195701","x: 0.74314379<br />y2:  0.064110789","x: 0.39208891<br />y2:  0.045715973","x: 0.54369462<br />y2: -1.685222413","x: 0.17866353<br />y2:  0.477429641","x: 0.71655036<br />y2:  0.568142348","x: 0.51044366<br />y2:  1.339304203","x: 0.40059410<br />y2: -1.269975342","x: 0.37553126<br />y2:  0.291889104","x: 0.55566875<br />y2: -0.638403011","x: 0.57644378<br />y2: -2.044344770","x: 0.05258145<br />y2:  2.245359187","x: 0.39213870<br />y2: -0.882744697","x: 0.45474856<br />y2: -0.271745546","x: 0.53695687<br />y2: -0.035000177","x: 0.71383771<br />y2: -1.241750104"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.0165416493546218,0.0287291250115001,0.0409166006683785,0.0531040763252568,0.0652915519821352,0.0774790276390135,0.0896665032958918,0.10185397895277,0.114041454609649,0.126228930266527,0.138416405923405,0.150603881580284,0.162791357237162,0.17497883289404,0.187166308550919,0.199353784207797,0.211541259864675,0.223728735521554,0.235916211178432,0.24810368683531,0.260291162492189,0.272478638149067,0.284666113805945,0.296853589462824,0.309041065119702,0.32122854077658,0.333416016433459,0.345603492090337,0.357790967747215,0.369978443404094,0.382165919060972,0.39435339471785,0.406540870374729,0.418728346031607,0.430915821688485,0.443103297345364,0.455290773002242,0.467478248659121,0.479665724315999,0.491853199972877,0.504040675629756,0.516228151286634,0.528415626943512,0.540603102600391,0.552790578257269,0.564978053914147,0.577165529571026,0.589353005227904,0.601540480884782,0.613727956541661,0.625915432198539,0.638102907855417,0.650290383512296,0.662477859169174,0.674665334826052,0.686852810482931,0.699040286139809,0.711227761796687,0.723415237453566,0.735602713110444,0.747790188767323,0.759977664424201,0.772165140081079,0.784352615737957,0.796540091394836,0.808727567051714,0.820915042708593,0.833102518365471,0.845289994022349,0.857477469679228,0.869664945336106,0.881852420992984,0.894039896649863,0.906227372306741,0.918414847963619,0.930602323620498,0.942789799277376,0.954977274934254,0.967164750591133,0.979352226248011],"y":[2.0879586442719,2.20878248508336,2.29487772207654,2.33832556489894,2.33305732416277,2.25914659232211,2.13628806352505,1.98504858452751,1.82599500208538,1.67969416295459,1.5608677506814,1.45531997127997,1.35930373300999,1.27143576974755,1.19033281536875,1.11461160374968,1.04667353378408,1.03001994440215,0.94115333456459,0.744323811711455,0.496679481840912,0.260312501408516,0.0430323038734889,-0.336527125935098,-0.456724972681012,-0.125053416528948,0.2313691298659,0.311681407671859,0.0717532422212768,-0.208998953667101,-0.317047024357175,-0.271942741427637,0.0644558504285102,0.0962649474282897,0.0492852567658094,0.010540513205111,0.00828928469981626,0.215274974148166,0.581761098144421,0.9376590951353,1.11288040356752,0.901925217485088,0.253197837626847,-0.158933462134917,-0.405861618470389,-0.606099385052039,-0.759192811904477,-0.817824804198529,-0.774473125163631,-0.663326422801553,-0.518351987143624,-0.373517108221171,-0.262789076065525,-0.211726136290873,-0.173339499282142,-0.131070442083635,-0.0811731394496001,-0.015797015019005,0.0775396418313931,0.205815152165505,0.349937716847288,0.496616201399744,0.644204719273922,0.782887698819632,0.907942621376727,0.956168208815183,0.886673640511839,0.751016119893008,0.623449160045091,0.578100325924672,0.568947543902009,0.569503682695778,0.600224576029946,0.68648254188153,0.831924497350176,1.02418905944022,1.25988983538709,1.53564043242625,1.85016394099964,2.2070299808253],"text":["x: 0.01654165<br />y2:  2.087958644","x: 0.02872913<br />y2:  2.208782485","x: 0.04091660<br />y2:  2.294877722","x: 0.05310408<br />y2:  2.338325565","x: 0.06529155<br />y2:  2.333057324","x: 0.07747903<br />y2:  2.259146592","x: 0.08966650<br />y2:  2.136288064","x: 0.10185398<br />y2:  1.985048585","x: 0.11404145<br />y2:  1.825995002","x: 0.12622893<br />y2:  1.679694163","x: 0.13841641<br />y2:  1.560867751","x: 0.15060388<br />y2:  1.455319971","x: 0.16279136<br />y2:  1.359303733","x: 0.17497883<br />y2:  1.271435770","x: 0.18716631<br />y2:  1.190332815","x: 0.19935378<br />y2:  1.114611604","x: 0.21154126<br />y2:  1.046673534","x: 0.22372874<br />y2:  1.030019944","x: 0.23591621<br />y2:  0.941153335","x: 0.24810369<br />y2:  0.744323812","x: 0.26029116<br />y2:  0.496679482","x: 0.27247864<br />y2:  0.260312501","x: 0.28466611<br />y2:  0.043032304","x: 0.29685359<br />y2: -0.336527126","x: 0.30904107<br />y2: -0.456724973","x: 0.32122854<br />y2: -0.125053417","x: 0.33341602<br />y2:  0.231369130","x: 0.34560349<br />y2:  0.311681408","x: 0.35779097<br />y2:  0.071753242","x: 0.36997844<br />y2: -0.208998954","x: 0.38216592<br />y2: -0.317047024","x: 0.39435339<br />y2: -0.271942741","x: 0.40654087<br />y2:  0.064455850","x: 0.41872835<br />y2:  0.096264947","x: 0.43091582<br />y2:  0.049285257","x: 0.44310330<br />y2:  0.010540513","x: 0.45529077<br />y2:  0.008289285","x: 0.46747825<br />y2:  0.215274974","x: 0.47966572<br />y2:  0.581761098","x: 0.49185320<br />y2:  0.937659095","x: 0.50404068<br />y2:  1.112880404","x: 0.51622815<br />y2:  0.901925217","x: 0.52841563<br />y2:  0.253197838","x: 0.54060310<br />y2: -0.158933462","x: 0.55279058<br />y2: -0.405861618","x: 0.56497805<br />y2: -0.606099385","x: 0.57716553<br />y2: -0.759192812","x: 0.58935301<br />y2: -0.817824804","x: 0.60154048<br />y2: -0.774473125","x: 0.61372796<br />y2: -0.663326423","x: 0.62591543<br />y2: -0.518351987","x: 0.63810291<br />y2: -0.373517108","x: 0.65029038<br />y2: -0.262789076","x: 0.66247786<br />y2: -0.211726136","x: 0.67466533<br />y2: -0.173339499","x: 0.68685281<br />y2: -0.131070442","x: 0.69904029<br />y2: -0.081173139","x: 0.71122776<br />y2: -0.015797015","x: 0.72341524<br />y2:  0.077539642","x: 0.73560271<br />y2:  0.205815152","x: 0.74779019<br />y2:  0.349937717","x: 0.75997766<br />y2:  0.496616201","x: 0.77216514<br />y2:  0.644204719","x: 0.78435262<br />y2:  0.782887699","x: 0.79654009<br />y2:  0.907942621","x: 0.80872757<br />y2:  0.956168209","x: 0.82091504<br />y2:  0.886673641","x: 0.83310252<br />y2:  0.751016120","x: 0.84528999<br />y2:  0.623449160","x: 0.85747747<br />y2:  0.578100326","x: 0.86966495<br />y2:  0.568947544","x: 0.88185242<br />y2:  0.569503683","x: 0.89403990<br />y2:  0.600224576","x: 0.90622737<br />y2:  0.686482542","x: 0.91841485<br />y2:  0.831924497","x: 0.93060232<br />y2:  1.024189059","x: 0.94278980<br />y2:  1.259889835","x: 0.95497727<br />y2:  1.535640432","x: 0.96716475<br />y2:  1.850163941","x: 0.97935223<br />y2:  2.207029981"],"type":"scatter","mode":"lines","name":"fitted values","line":{"width":3.77952755905512,"color":"rgba(51,102,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":30.6118721461187,"r":7.30593607305936,"b":44.5662100456621,"l":37.2602739726027},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0315988794900477,1.02749275509268],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"x","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.58437970343023,3.39819506961914],"tickmode":"array","ticktext":["-2","-1","0","1","2","3"],"tickvals":[-2,-1,0,1,2,3],"categoryorder":"array","categoryarray":["-2","-1","0","1","2","3"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"y2","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"d81f73d508f7":{"x":{},"y":{},"type":"scatter"},"d81f273fcb8a":{"x":{},"y":{}}},"cur_data":"d81f73d508f7","visdat":{"d81f73d508f7":["function (y) ","x"],"d81f273fcb8a":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>


---
# Themes: Add some style to your plot

.left-code[

```r
p &lt;- ggplot(mtcars) +
  geom_point(aes(x = wt, 
                 y = mpg, 
                 colour = factor(gear))) +
  facet_wrap(~am)
p

```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/mtcars-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---
# Theme: theme_minimal

.left-code[

```r
p + 
  theme_minimal()
```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/mtcars-minimal-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]
---
# Theme: ggthemes `theme_few()`

.left-code[

```r
p + 
  theme_few() + 
  scale_colour_few()
```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/mtcars-theme-few-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---
# Theme: ggthemes `theme_excel()` 🤮

.left-code[

```r
p + 
  theme_excel() + 
  scale_colour_excel()
```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/mtcars-theme-excel-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]
---
# Theme: for fun

.left-code[

```r
library(wesanderson)
p + 
  scale_colour_manual(
    values = wes_palette("Royal1")
    )

```
]

.right-plot[
&lt;img src="lecture_4b_files/figure-html/theme-wes-out-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---
# Summary: themes

- The `ggthemes` package has many different styles for the plots. 
- Other packages such as `xkcd`, `skittles`, `wesanderson`, `beyonce`, `ochre`, ....

---
background-image: url(images/munzer-hierarchy.png)
background-size: contain
background-position: 50% 50%
class: center, bottom, white

---
# Hierarchy of mappings

1. Position - common scale (BEST): axis system
2. Position - nonaligned scale: boxes in a side-by-side boxplot
3. Length, direction, angle: pie charts, regression lines, wind maps
4. Area: bubble charts
5. Volume, curvature: 3D plots
6. Shading, color (WORST): maps, points coloured by numeric variable

- [Di's crowd-sourcing expt](http://visiphilia.org/2016/08/03/CM-hierarchy)
- Nice explanation by [Peter Aldous](http://paldhous.github.io/ucb/2016/dataviz/week2.html)
- [General plotting advice and a book from Naomi Robbins](https://www.forbes.com/sites/naomirobbins/#2b1e20082a6a)

---
# Your Turn:

- lab quiz open (requires answering questions from Lab exercise)
- go to rstudio.cloud and check out exercise 4-B
- If you want to use R / Rstudio on your laptop:
  - Install R + Rstudio (see [Stuart Lee's instructions](https://github.com/sa-lee/installr))
  - open R
  - type the following:
  ```r
  # install.packages("usethis")
  library(usethis)
  use_course("https://ida.numbat.space/exercises/4b/ida-exercise-4b.zip")
  ```

---

# Resources

- Kieran Healy [Data Visualization](http://socviz.co/index.html)
- Winston Chang (2012) [Cookbook for R](graphics cookbook)
- Antony Unwin (2014) [Graphical Data Analysis](http://www.gradaanwr.net)
- Naomi Robbins (2013) [Creating More Effective Charts](http://www.nbr-graphs.com)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLanguage": "r",
"highlightLines": true,
"highlightSpans": false,
"countIncrementalSlides": false,
"slideNumberFormat": "%current%/%total%",
"navigation": {
"scroll": false,
"touch": true,
"click": false
},
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  /* Replace <script> tags in slides area to make them executable
   *
   * Runs after post-processing of markdown source into slides and replaces only
   * <script>s on the last slide of continued slides using the .has-continuation
   * class added by xaringan. Finally, any <script>s in the slides area that
   * aren't executed are commented out.
   */
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container:not(.has-continuation) script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
  var scriptsNotExecuted = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container.has-continuation script'
  );
  if (!scriptsNotExecuted.length) return;
  for (var i = 0; i < scriptsNotExecuted.length; i++) {
    var comment = document.createComment(scriptsNotExecuted[i].outerHTML)
    scriptsNotExecuted[i].parentElement.replaceChild(comment, scriptsNotExecuted[i])
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'assets/mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
