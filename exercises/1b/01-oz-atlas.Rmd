---
title: "Australian Atlas"
author: "Nicholas Tierney"
date: '2019-08-02'
output:
  html_document: default
---

```{r setup}
```


## Making a report

We have pulled some data on platypuses from the Atlas of Living Australia using the "ALA4R" package, and done some subsetting of the data to only look at a few of the key variables, and for the state of Victoria.

Let's read in  data with `read_csv`:

```{r echo=TRUE}
library(readr)
platypus_vic <- read_csv(here::here("data/platypus-vic.csv"))
# platypus_vic <- read_csv(here::here("exercises/1b/data/platypus-vic.csv"))
library(dplyr)

```

There are `r nrow(data)` observations of platypus that we have seen.

Add a section header called "About the data" to your document. Write a paragraph about the "Atlas of Living Australia" (use your internet search skills!).

You could even try adding a picture of a platypus into your report. Be sure that it is an image that you are free to use.

## Adding plots

Let's make some plots. Two of the variables in the data set are the latitude and longitude indicating where the animal was spotted. This is going to be the first plot, made using the `ggplot2` package from `tidyverse` suite.

```{r echo = FALSE, message=FALSE}
library(tidyverse)
ggplot(data = platypus_vic,
       aes(x = longitude, 
           y = latitude)) + 
  geom_point()
```

## look at the data

Use `View(platypus_vic)` to open a "spreadsheet" view of the data.

What do you see?

What was the year with the most platypus? How do you think you would work that out?
What steps would you need to take?

We will cover how to answer these kinds of questions and more in class!

## Appendix

Below contains the code used to download the data

```{r ala-for-4, echo=TRUE, eval = FALSE}
# load the ALA4R package, which contains the platypus data
library(ALA4R)
# Take a look at what the package does using the code `help(package="ALA4R")`

# Look up the scientific name for platypus using:
specieslist("platypus")

# This returns a lot of different organisms with "platypus" in the name, but you should be able to find one line with the relevant information, that its scientific name is "Ornithorhynchus anatinus". 

platypus <- occurrences("Ornithorhynchus anatinus", download_reason_id=10)

# 518426.7 is NOWHERE near Australia. Let's filter it out
platypus <- platypus$data %>% filter(longitude < 518426)

# subset the data using dplyr filter and select commands
platypus_vic <- platypus %>% 
  filter(state == "Victoria") %>% 
  select(id,
         commonName,
         scientificName,
         state,
         latitude,
         longitude,
         eventDate,
         sex) %>% 
  as_tibble()

write_csv(platypus_vic, here::here("data/platypus-vic.csv"))

# You can learn more about `read_csv` and `write_csv` by typing `?write_csv`.

```

